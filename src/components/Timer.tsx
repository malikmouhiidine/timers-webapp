import { FC } from "react";
import { ITimer } from "./Main";

interface Props extends ITimer {
  onToggle: () => void;
  onDelete: () => void;
}

const Timer: FC<Props> = ({
  title,
  time,
  isRunning,
  originalTime,
  onToggle,
  onDelete,
}) => {
  function formatTime(time: number) {
    const hours = Math.floor(time / 3600);
    const minutes = Math.floor((time % 3600) / 60);
    const seconds = time % 60;
    return hours > 0
      ? `${hours > 9 ? hours : `0${hours}`}:${
          minutes > 9 ? minutes : `0${minutes}`
        }`
      : minutes > 0
      ? `${minutes > 9 ? minutes : `0${minutes}`}:${
          seconds > 9 ? seconds : `0${seconds}`
        }`
      : `${seconds}`;
  }

  return (
    <div className="container-item">
      <div
        className="parent-circle"
        style={{
          background: `conic-gradient(transparent 0deg ${
            (time * 360) / originalTime
          }deg,var(--timer-container-color) ${
            (time * 360) / originalTime
          }deg 360deg),
                      conic-gradient(var(--info-color) 0deg, var(--info-color) ${
                        (time * 360) / originalTime
                      }deg)`,
        }}
      >
        <div className="child-circle">
          <div className="title" title={title}>
            {title.length > 8 ? `${title.slice(0, 7)}...` : title}
          </div>
          <div className="timer">{formatTime(time)}</div>
          <div className="action-btns">
            {isRunning ? (
              <button className="pause-btn" onClick={onToggle}>
                <svg
                  width="22"
                  height="31"
                  viewBox="0 0 22 31"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M17.2857 0C16.0354 0 14.8363 0.489909 13.9522 1.36195C13.0681 2.234 12.5714 3.41674 12.5714 4.65V26.35C12.5714 27.5833 13.0681 28.766 13.9522 29.638C14.8363 30.5101 16.0354 31 17.2857 31C18.536 31 19.7351 30.5101 20.6192 29.638C21.5033 28.766 22 27.5833 22 26.35V4.65C22 3.41674 21.5033 2.234 20.6192 1.36195C19.7351 0.489909 18.536 0 17.2857 0ZM18.8571 26.35C18.8571 26.7611 18.6916 27.1553 18.3969 27.446C18.1022 27.7367 17.7025 27.9 17.2857 27.9C16.8689 27.9 16.4692 27.7367 16.1745 27.446C15.8798 27.1553 15.7143 26.7611 15.7143 26.35V4.65C15.7143 4.23891 15.8798 3.84467 16.1745 3.55398C16.4692 3.2633 16.8689 3.1 17.2857 3.1C17.7025 3.1 18.1022 3.2633 18.3969 3.55398C18.6916 3.84467 18.8571 4.23891 18.8571 4.65V26.35ZM4.71429 0C3.46398 0 2.26488 0.489909 1.38078 1.36195C0.496682 2.234 0 3.41674 0 4.65V26.35C0 27.5833 0.496682 28.766 1.38078 29.638C2.26488 30.5101 3.46398 31 4.71429 31C5.96459 31 7.16369 30.5101 8.04779 29.638C8.93189 28.766 9.42857 27.5833 9.42857 26.35V4.65C9.42857 3.41674 8.93189 2.234 8.04779 1.36195C7.16369 0.489909 5.96459 0 4.71429 0ZM6.28571 26.35C6.28571 26.7611 6.12015 27.1553 5.82545 27.446C5.53075 27.7367 5.13105 27.9 4.71429 27.9C4.29752 27.9 3.89782 27.7367 3.60312 27.446C3.30842 27.1553 3.14286 26.7611 3.14286 26.35V4.65C3.14286 4.23891 3.30842 3.84467 3.60312 3.55398C3.89782 3.2633 4.29752 3.1 4.71429 3.1C5.13105 3.1 5.53075 3.2633 5.82545 3.55398C6.12015 3.84467 6.28571 4.23891 6.28571 4.65V26.35Z"
                    fill="#8652C6"
                  />
                </svg>
              </button>
            ) : (
              <button className="play-btn" onClick={onToggle}>
                <svg
                  width="31"
                  height="34"
                  viewBox="0 0 31 34"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M27.7926 11.3312L9.64029 0.865791C8.65804 0.295595 7.54318 -0.00310749 6.40894 2.43768e-05C5.27469 0.00315625 4.16148 0.30801 3.18237 0.883622C2.20325 1.45923 1.39312 2.2851 0.834253 3.27733C0.275386 4.26956 -0.0123044 5.39281 0.000403468 6.53299V27.5394C0.000403468 29.2529 0.677488 30.8961 1.88271 32.1077C3.08793 33.3193 4.72255 34 6.42699 34C7.55529 33.9981 8.66331 33.6984 9.64029 33.131L27.7926 22.6656C28.768 22.0981 29.5777 21.2828 30.1407 20.3013C30.7037 19.3199 31 18.2069 31 17.074C31 15.9411 30.7037 14.8281 30.1407 13.8466C29.5777 12.8652 28.768 12.0498 27.7926 11.4823V11.3312ZM25.9135 19.2464L7.76117 29.8629C7.35431 30.0947 6.89464 30.2166 6.42699 30.2166C5.95934 30.2166 5.49967 30.0947 5.09282 29.8629C4.68711 29.6275 4.35022 29.2888 4.11602 28.8809C3.88182 28.473 3.75856 28.0103 3.75864 27.5394V6.45742C3.75856 5.98647 3.88182 5.5238 4.11602 5.11593C4.35022 4.70805 4.68711 4.36935 5.09282 4.13387C5.50135 3.90559 5.95965 3.7823 6.42699 3.77495C6.89401 3.78459 7.35178 3.90774 7.76117 4.13387L25.9135 14.6749C26.3193 14.9102 26.6564 15.2489 26.8907 15.6568C27.1251 16.0647 27.2484 16.5274 27.2484 16.9984C27.2484 17.4694 27.1251 17.9322 26.8907 18.34C26.6564 18.7479 26.3193 19.0866 25.9135 19.322V19.2464Z"
                    fill="#8652C6"
                  />
                </svg>
              </button>
            )}
            <button className="delete-btn" onClick={onDelete}>
              <svg
                width="30"
                height="30"
                viewBox="0 0 30 30"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M17.6418 14.9984L29.4458 3.21194C29.7986 2.85909 29.9968 2.38052 29.9968 1.88151C29.9968 1.3825 29.7986 0.903933 29.4458 0.551081C29.093 0.19823 28.6144 0 28.1155 0C27.6165 0 27.138 0.19823 26.7852 0.551081L15 12.3563L3.21479 0.551081C2.86198 0.19823 2.38346 4.43041e-07 1.88451 4.46759e-07C1.38555 4.50477e-07 0.907034 0.19823 0.55422 0.551081C0.201406 0.903933 0.00319801 1.3825 0.003198 1.88151C0.003198 2.38052 0.201406 2.85909 0.55422 3.21194L12.3582 14.9984L0.55422 26.7849C0.378607 26.9591 0.239219 27.1663 0.144096 27.3947C0.0489742 27.623 0 27.8679 0 28.1153C0 28.3627 0.0489742 28.6076 0.144096 28.8359C0.239219 29.0643 0.378607 29.2715 0.55422 29.4457C0.7284 29.6214 0.935626 29.7608 1.16395 29.8559C1.39227 29.951 1.63716 30 1.88451 30C2.13185 30 2.37674 29.951 2.60507 29.8559C2.83339 29.7608 3.04061 29.6214 3.21479 29.4457L15 17.6405L26.7852 29.4457C26.9594 29.6214 27.1666 29.7608 27.3949 29.8559C27.6233 29.951 27.8682 30 28.1155 30C28.3628 30 28.6077 29.951 28.8361 29.8559C29.0644 29.7608 29.2716 29.6214 29.4458 29.4457C29.6214 29.2715 29.7608 29.0643 29.8559 28.8359C29.951 28.6076 30 28.3627 30 28.1153C30 27.8679 29.951 27.623 29.8559 27.3947C29.7608 27.1663 29.6214 26.9591 29.4458 26.7849L17.6418 14.9984Z"
                  fill="#8652C6"
                />
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>
  );
};

export default Timer;
